{"version":3,"sources":["webpack:///webpack/bootstrap 9448fc9d05f0a9e781e9","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///external \"passport\"","webpack:///./server/model/user.js","webpack:///external \"mongoose\"","webpack:///external \"mongoose-auto-increment\"","webpack:///./server/config/index.js","webpack:///external \"fs\"","webpack:///./server/auth/strategies/local.js","webpack:///./server/api/board.js","webpack:///./server/api/test.js","webpack:///./server/api/user.js","webpack:///./server/index.js","webpack:///./server/init/index.js","webpack:///external \"nuxt\"","webpack:///external \"express-session\"","webpack:///external \"body-parser\"","webpack:///external \"serve-static\"","webpack:///./server/init/auth.js","webpack:///./server/auth/strategies ^\\.\\/.*$","webpack:///external \"passport-local\"","webpack:///./server/init/api/index.js","webpack:///./server/api ^\\.\\/.*$","webpack:///./server/model/board.js","webpack:///./server/utils/upload.js","webpack:///external \"multer\"","webpack:///./server/init/api/errorhandler.js","webpack:///./server/init/api/apiLog.js","webpack:///./server/init/api/middleware.js","webpack:///./nuxt.config.js","webpack:///./server/init/mongoose.js"],"names":["mongoose","require","autoIncrement","UserSchema","Schema","email","type","String","unique","pwd","state","default","name","birthDay","Date","userType","photo","regDt","now","plugin","model","startAt","field","static","_id","callback","findOne","method","User","module","exports","host","port","db","url","passport","LocalStrategy","Strategy","use","usernameField","passwordField","done","err","user","message","router","Router","Board","get","req","res","find","return","params","id","delete","next","deleteOne","put","update","body","post","board","regDate","save","ok","forbidden","error","path","upload","authenticate","info","logIn","json","forClient","all","logout","isAuthenticated","undefined","config","app","listen","console","log","Builder","Nuxt","session","bodyParser","express","serveStatic","initMiddleware","urlencoded","extended","join","__dirname","initSession","secret","initAuth","initRouter","initNuxt","nuxtConfig","dev","nuxt","builder","build","render","initMongoose","fs","initPassport","initialize","initAllStrategies","readdirSync","forEach","file","initSerialize","serializeUser","deserializeUser","findById","useApiAll","moduleName","substr","indexOf","errorHandle","loggingRequest","requestLog","initMyMiddleware","response","getApp","BoardSchema","title","required","content","multer","storage","diskStorage","destination","filename","extension","extname","originalname","basename","limits","fies","fileSize","Error","sendStatus","JSON","stringify","query","notFound","status","result","srcDir","head","meta","charset","hid","script","src","link","rel","href","middleware","plugins","css","loading","color","vendor","extractCSS","init","connect","connection","on","e","once","Promise","global","readyState"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9448fc9d05f0a9e781e9","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 2\n// module chunks = 0","const mongoose = require(\"mongoose\")\r\nconst autoIncrement = require('mongoose-auto-increment');\r\n\r\nconst UserSchema = mongoose.Schema({\r\n    email: {\r\n        type: String,\r\n        require: true,\r\n        unique: true\r\n    },\r\n    pwd: {\r\n        type: String,\r\n        require: true,\r\n    },\r\n    state: {\r\n        type: String,\r\n        default: \"REG\"\r\n    },\r\n    name: {\r\n        type: String,\r\n        require: true\r\n    },\r\n    birthDay: {\r\n        type: Date,\r\n        require: true,\r\n    },\r\n    userType: {\r\n        type: String,\r\n        default: \"NORMAL\"\r\n    },\r\n    photo: {\r\n        type: String,\r\n    },\r\n    regDt: {\r\n        type: Date,\r\n        default: Date.now\r\n    }\r\n});\r\n\r\nUserSchema.plugin(autoIncrement.plugin, {\r\n    model: \"User\",\r\n    startAt: 1,\r\n    field: '_id'\r\n});\r\n\r\n// User.findById(_id, (err,result)=>{})\r\nUserSchema.static(\"findById\", function(_id, callback){\r\n    return this.findOne({_id}, callback);\r\n});\r\n\r\n// result = new User().myMethod(arg1, arg2);\r\nUserSchema.method(\"forClient\", function(){\r\n    return {\r\n        _id : this._id,\r\n        email : this.email,\r\n        name: this.name,\r\n        birthDay : this.birthDay,\r\n        photo: this.photo,\r\n        userType : this.userType,\r\n        regDt : this.regDt,\r\n    };\r\n});\r\n\r\nlet User = mongoose.model(\"User\", UserSchema);\r\n\r\nmodule.exports = User;\n\n\n// WEBPACK FOOTER //\n// ./server/model/user.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"mongoose-auto-increment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose-auto-increment\"\n// module id = 5\n// module chunks = 0","\r\nmodule.exports = {\r\n    host: \"localhost\",\r\n    port: 3000,\r\n    db:{\r\n        url:\"mongodb://localhost/blog\"\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 7\n// module chunks = 0","const passport = require('passport');\r\nconst LocalStrategy = require('passport-local').Strategy;\r\n\r\nconst User = require(\"../../model/user\");\r\n\r\nmodule.exports = function () {\r\n    passport.use(new LocalStrategy({\r\n            usernameField: 'email',\r\n            passwordField: 'pwd'\r\n        },\r\n        function (email, pwd, done) {\r\n            User.findOne({email, pwd}, function (err, user) {\r\n                if (err) {\r\n                    return done(err);\r\n                }\r\n                if (!user) {\r\n                    return done(null, false, {message: 'Incorrect.'});\r\n                }\r\n\r\n                return done(null, user);\r\n            });\r\n        }\r\n    ))\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/auth/strategies/local.js","const router = require(\"express\").Router()\r\n\r\nconst Board = require(\"../model/board\");\r\n\r\nrouter.get(\"/getList\", function (req, res) {\r\n    Board.find({}, res.return)\r\n});\r\n\r\nrouter.get(\"/:id\", function (req, res) {\r\n    Board.findOne({_id: req.params.id}, res.return)\r\n});\r\n\r\nrouter.delete(\"/:id\", function (req, res, next) {\r\n    Board.deleteOne({_id:req.params.id}, res.return)\r\n});\r\n\r\nrouter.put(\"/:id\", function (req, res) {\r\n    Board.update({_id:req.params.id}, req.body, res.return)\r\n});\r\n\r\nrouter.post(\"/insert\", function (req, res) {\r\n    let board = new Board({\r\n        ...req.body,\r\n        regDate : new Date()\r\n    });\r\n\r\n    board.save(res.return);\r\n})\r\n\r\n\r\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./server/api/board.js","let router = require(\"express\").Router();\r\n\r\nrouter.get(\"/ok\", (req, res, next)=>{\r\n    res.ok();\r\n});\r\n\r\nrouter.get(\"/forbidden\", function (req, res) {\r\n    res.forbidden();\r\n});\r\n\r\nrouter.get(\"/error\", function (req, res) {\r\n    res.error({message:\"error!\"});\r\n});\r\n\r\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./server/api/test.js","const passport = require('passport');\r\nconst path = require('path');\r\nconst router = require('express').Router();\r\n\r\nconst User = require(\"../model/user\");\r\nconst upload = require(\"../utils/upload\");\r\n\r\nrouter.post('/join', function (req, res) {\r\n    new User({\r\n        ...req.body,\r\n        state: \"REG\",\r\n        userType: \"NORMAL\",\r\n        regDt: new Date()\r\n    }).save(res.return);\r\n});\r\n\r\n// router.post('/join', upload.single('photo'), function (req, res, next) {\r\n//\r\n//     new User({\r\n//         ...req.body,\r\n//         state: \"REG\",\r\n//         userType: \"NORMAL\",\r\n//         regDt: new Date()\r\n//     }).save(err => {\r\n//         res.json({\r\n//             status: !err,\r\n//             message: err && err.message\r\n//         });\r\n//     });\r\n//\r\n//     res.json({file: req.files[0], body: req.body})\r\n// });\r\n\r\n\r\nrouter.post('/login', function (req, res) {\r\n    passport.authenticate('local', function (err, user, info) {\r\n        err && res.error(err);\r\n        !user && res.error({message : \"password\"})\r\n\r\n        req.logIn(user, err => {\r\n            err && res.error(err);\r\n            res.json({user: user.forClient()});\r\n        });\r\n    })(req, res);\r\n});\r\n\r\nrouter.all(\"/logout\", function (req, res) {\r\n    res.json(req.logout())\r\n})\r\n\r\n/* GET user by ID. */\r\nrouter.all('/currentUser', function (req, res) {\r\n    res.json(req.isAuthenticated() ? {user: req.user.forClient()} : undefined);\r\n});\r\n\r\n/* GET user by ID. */\r\nrouter.get(\"/test\", function (req, res) {\r\n    res.json(req.user || req.user.forClient() && \"none\");\r\n});\r\n\r\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./server/api/user.js","\r\n\r\nlet config = require('./config');\r\nlet app = require('./init')();\r\n\r\napp.listen(config.port, config.host, function(){\r\n    console.log(\"SERVER INIT\")\r\n})\r\n\r\nconsole.log('Server listening on ' + config.host + ':' + config.port);\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","const {Builder, Nuxt} = require(\"nuxt\");\r\nconst session = require(\"express-session\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst express = require('express');\r\nconst serveStatic = require('serve-static');\r\nconst path = require(\"path\");\r\n\r\nfunction initMiddleware(app) {\r\n    app.use(bodyParser.urlencoded({extended: true}));\r\n    app.use(bodyParser.json());\r\n    app.use(\"/public\", serveStatic(path.join(__dirname, \"..\", \"public\")));\r\n}\r\n\r\nfunction initSession(app) {\r\n    app.use(session({secret: \"!XV^&_H$VJ$CHS&\"}))\r\n}\r\n\r\nfunction initAuth(app) {\r\n    require(\"./auth\")(app);\r\n}\r\n\r\nfunction initRouter(app) {\r\n    require(\"./api\")(app);\r\n}\r\n\r\nfunction initNuxt(app) {\r\n    let nuxtConfig = require('../../nuxt.config.js')\r\n    nuxtConfig.dev = !(process.env.NODE_ENV === 'production')\r\n\r\n    const nuxt = new Nuxt(nuxtConfig)\r\n\r\n    if (nuxtConfig.dev) {\r\n        const builder = new Builder(nuxt)\r\n        builder.build()\r\n    }\r\n\r\n    app.use(nuxt.render)\r\n}\r\n\r\nfunction initMongoose() {\r\n    require(\"./mongoose\")()\r\n}\r\n\r\nmodule.exports = function () {\r\n    let app = express();\r\n\r\n    initMongoose();\r\n    initMiddleware(app);\r\n    initSession(app);\r\n    initAuth(app);\r\n    initRouter(app);\r\n    initNuxt(app);\r\n\r\n    return app;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/init/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"serve-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-static\"\n// module id = 17\n// module chunks = 0","const passport = require('passport');\r\nconst path = require('path');\r\nconst fs = require(\"fs\");\r\n\r\nconst User = require(\"../model/user\");\r\n\r\nfunction initPassport(app) {\r\n    app.use(passport.initialize());\r\n    app.use(passport.session());\r\n}\r\n\r\nfunction initAllStrategies() {\r\n    fs.readdirSync(path.join(__dirname, \"..\", \"auth\", \"strategies\"))\r\n        .forEach(file => {\r\n            require(`../auth/strategies/${file}`)()\r\n        });\r\n}\r\n\r\nfunction initSerialize() {\r\n    // done({}, user) => req.session.passport.user = user\r\n    passport.serializeUser(function (user, done) {\r\n        done(null, user.forClient());\r\n    });\r\n\r\n    passport.deserializeUser(function (user, done) {\r\n        User.findById(user._id, done);\r\n    });\r\n}\r\n\r\nmodule.exports = function (app) {\r\n    initPassport(app);\r\n    initAllStrategies();\r\n    initSerialize();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/init/auth.js","var map = {\n\t\"./local\": 8,\n\t\"./local.js\": 8\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 19;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/auth/strategies ^\\.\\/.*$\n// module id = 19\n// module chunks = 0","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 20\n// module chunks = 0","const express = require('express');\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\n\r\nfunction useApiAll(app) {\r\n    fs.readdirSync(path.join(__dirname,\"..\", \"..\", \"api\"))\r\n        .forEach(file => {\r\n            let moduleName = file.substr(0, file.indexOf(\".js\"));\r\n\r\n            console.log(`app.use(\"/${moduleName}\"), require(\"../../api/${file}\")`);\r\n            app.use(`/${moduleName}`, require(`../../api/${file}`));\r\n        })\r\n}\r\n\r\nfunction errorHandle(app) {\r\n\r\n    require(\"./errorhandler\")(app);\r\n}\r\n\r\nfunction loggingRequest(app) {\r\n    require(\"./apiLog\").requestLog(app);\r\n}\r\n\r\nfunction initMyMiddleware(app) {\r\n    app.use(require(\"./middleware\").response);\r\n}\r\n\r\nfunction getApp() {\r\n    let app = express();\r\n    loggingRequest(app);\r\n    initMyMiddleware(app);\r\n    useApiAll(app);\r\n    errorHandle(app);\r\n\r\n    return app;\r\n}\r\n\r\nmodule.exports = app => app.use(\"/api\", getApp())\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/init/api/index.js","var map = {\n\t\"./board\": 9,\n\t\"./board.js\": 9,\n\t\"./test\": 10,\n\t\"./test.js\": 10,\n\t\"./user\": 11,\n\t\"./user.js\": 11\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 22;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/api ^\\.\\/.*$\n// module id = 22\n// module chunks = 0","const mongoose = require(\"mongoose\");\r\nconst autoIncrement = require('mongoose-auto-increment');\r\n\r\nconst BoardSchema = mongoose.Schema({\r\n    title: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    content: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    regDate :{\r\n        type: Date,\r\n        default : Date.now\r\n    }\r\n});\r\n\r\nBoardSchema.plugin(autoIncrement.plugin, {\r\n    model: \"Board\",\r\n    startAt: 1,\r\n    field: '_id'\r\n});\r\n\r\nlet Board = mongoose.model(\"Board\", BoardSchema);\r\n\r\n// export default {\r\n//     Board\r\n// }\r\nmodule.exports = Board;\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/model/board.js","\r\nconst multer  = require('multer')\r\n// const upload = multer({dest: \"../../uploads\"})\r\n\r\n\r\nlet storage = multer.diskStorage({\r\n    destination: (req, res, callback) => {\r\n        callback(null, './server/public/uploads');\r\n    },\r\n    filename: (req, file, callback) => {\r\n        //callback(null, file.originalname + Date.now());\r\n\r\n        let extension = path.extname(file.originalname);\r\n        let basename = path.basename(file.originalname, extension);\r\n        callback(null, `${basename}${Date.now()}${extension}`);\r\n    }\r\n});\r\n\r\nlet upload = multer({\r\n    storage: storage,\r\n    limits: {\r\n        fies: 10,\r\n        fileSize: 1024 * 1024 * 1024\r\n    }\r\n});\r\n\r\nmodule.exports = upload;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/upload.js","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 25\n// module chunks = 0","\r\n\r\n\r\nmodule.exports = app =>{\r\n\r\n    app.use(function (err, req, res, next) {\r\n        if (!err) next();\r\n\r\n        console.log(\"************************************************************************\");\r\n        console.log(`  500 / ${err.message}  `);\r\n\r\n        res.Error();\r\n    });\r\n\r\n    app.use((req, res) => {\r\n        console.log(\"************************************************************************\");\r\n        console.log(`      404 NOT_FOUND          `);\r\n\r\n        res.sendStatus(404);\r\n    })\r\n};\n\n\n// WEBPACK FOOTER //\n// ./server/init/api/errorhandler.js","module.exports = {\r\n    requestLog(app) {\r\n        app.use(\"/\", (req, res, next) => {\r\n            console.log(\"************************************************************************\");\r\n            console.log(`user : ${JSON.stringify(req.user)} `);\r\n            console.log(`query : ${JSON.stringify(req.query)} & params : ${JSON.stringify(req.params)} & body : ${JSON.stringify(req.body)}`);\r\n            console.log(`method : ${req.method} & url : ${req.url}`);\r\n            console.log(`time : ${new Date()}`);\r\n\r\n            next()\r\n        });\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/init/api/apiLog.js","\r\n\r\n\r\nmodule.exports = {\r\n    response: (req, res, next) => {\r\n        res.ok = () => res.sendStatus(200);\r\n        res.notFound = () => res.sendStatus(404);\r\n        res.error = err => err && err.message ? res.status(500).json(err.message) : res.sendStatus(500);\r\n        res.forbidden = () => res.sendStatus(403);\r\n        res.return = (err, result) => err ? res.error(err) : res.json(result);\r\n\r\n        next();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/init/api/middleware.js","module.exports = {\r\n    srcDir: \"client/\",\r\n    /*\r\n    ** Headers of the page\r\n    */\r\n    head: {\r\n        title: 'Raccoon',\r\n        meta: [\r\n            {charset: 'utf-8'},\r\n            {name: 'viewport', content: 'width=device-width, initial-scale=1'},\r\n            {hid: 'description', name: 'description', content: 'Nuxt.js project'}\r\n        ],\r\n        script: [\r\n            {src: '//cdn.ckeditor.com/4.6.2/full/ckeditor.js'}\r\n        ],\r\n        link: [\r\n            {rel: 'icon', type: 'image/x-icon', href: '/favicon.ico'},\r\n            {rel: 'stylesheet', href: 'https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons'}\r\n        ]\r\n    },\r\n    router: {\r\n        middleware: \"checkAuth\"\r\n    },\r\n    plugins: [\r\n        '~/plugins/vuetify.js',\r\n    ],\r\n    css: ['~/assets/style/app.styl'],\r\n    loading: {color: '#060580'},\r\n    build: {\r\n        vendor: [\r\n            'axios',\r\n            '~/plugins/vuetify.js',\r\n            'vue2-medium-editor'\r\n        ],\r\n        extractCSS: true,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","const mongoose  = require('mongoose');\r\nconst autoIncrement = require('mongoose-auto-increment');\r\nconst config = require(\"../config\");\r\n\r\nfunction init(db) {\r\n    mongoose.connect(config.db.url);\r\n    db = mongoose.connection;\r\n\r\n    autoIncrement.initialize(db);\r\n\r\n    db.on('error', (e) => console.log(e));\r\n\r\n    db.once('open', function () {\r\n        console.log(\"Connected to mongo server\");\r\n    });\r\n}\r\n\r\nmodule.exports = function () {\r\n    let db;\r\n\r\n    mongoose.Promise = global.Promise;\r\n\r\n    mongoose.connection.readyState === 1 || init(db);\r\n\r\n    return db;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./server/init/mongoose.js"],"sourceRoot":""}